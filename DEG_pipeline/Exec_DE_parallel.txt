#!/bin/bash -l

#SBATCH --time=16:00:00
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=1
#SBATCH --mem=8GB
#SBATCH --mail-user=dennis00@ucsb.edu
#SBATCH --mail-type=END,FAIL
#SBATCH --job-name="DESeq"
#SBATCH --array=1-19   # <-- Change 20 to actual number of DEX data files
#SBATCH --output=/home/local/ADS/dennis00/Yi_Lab/Lab_WorkDir/Dennis/MarkerPaper/slurm_archive/RN012/DE/DESeq_%A_%a.out

cd $SLURM_SUBMIT_DIR
cd /home/local/ADS/dennis00/Yi_Lab/Lab_WorkDir/Dennis/MarkerPaper/

echo "SLURM Job ID        : ${SLURM_JOB_ID}"
echo "SLURM Array Task ID : ${SLURM_ARRAY_TASK_ID}"
echo "Starting DESeq2 differential expression..."

Rscript DE_test_parallel.R

echo "âœ… Finished DESeq2 for task ${SLURM_ARRAY_TASK_ID}"
